---
title: "HW 4 Explore a Single Variable - Guide"
author: "Henry Lin"
output:
  html_document:
    theme: sandstone
    highlight: tango
    toc: yes
    toc_float: yes
    css: ../css/sandstone.css
  pdf_document: default
---


```{r set chunk option, echo=F}
knitr::opts_chunk$set(echo = F, warning=FALSE, message=FALSE, fig.height=4, fig.align='center') #Chunk default settings 
```

```{r library packages}
library(dplyr)
library(ggplot2)
library(janitor)
library(kableExtra)
```

```{r set ggplot2 parameters}
theme_update(plot.title = element_text(hjust = 0.5))
```

```{r load data}
load("/cloud/project/data/mydata.Rdata")
load("/cloud/project/data/clean.Rdata")
```


# Table of Variables

Original Variable (from addhealth)  |   New Variable  |    Description (from addhealth)
-------------------|-----------------|------------------
H4LM20 | time_of_day_worked | Which one of these categories best describes the hours you (work/worked) at this job?
H4LM17 | separation_cause | What is the main reason you left your most recent job?
H4LM26 | job_satisfaction | How satisfied (are/were) you with this job?
H4LM14 | current_status | Which one of the following categories best describes what you're doing now?
H4LM28 | family_impact_on_work | Indicate how much you would agree or disagree with this statement: Family responsibilities have interfered with my ability to work.
H4LM30 | work_impact_family_time | (In the past 12 months/Since you started your current job/In the last year of your most recent job), how often on your primary job (have you spent/have you spent/did you spend) less time with your family than you wanted to because of work responsibilities?
H4LM19 | time_worked | How many hours a week (do/did) you usually work at this job?
H4LM12 | number_of_jobs_worked | On how many jobs are you currently working for pay at least 10 hours a week?

# Examing categorical variable 
## 1st Categorical `time_of_day_worked`

**Numerical Summary Table**  

```{r summary table cat 1}
ToD_worked <- mydata %>%
  tabyl(time_of_day_worked) %>%
  adorn_pct_formatting(digits=1) %>%
  adorn_totals() 
ToD_worked %>% 
  kable() %>%
  kable_styling(full_width = F, position="center")
```

**Bar Plot - Frequency of Levels**

```{r bar plot cat 1}
mydata %>% 
  #filter(time_of_day_worked=="yes" | time_of_day_worked=="no") %>% 
  ggplot(aes(x=time_of_day_worked, y= ..prop.., group=1))+
  geom_bar(fill="steelblue", width=0.)5+
  ggtitle("Which one of these categories best describes the hours you (work/worked) at this job?") +
  xlab("subject's response")
```

**Narrative summary**  
<div id = "narrative">
The participants in the **addhealth** study were asked, "*Which one of these categories best describes the hours you (work/worked) at this job?*" **5027** out of **5114** provided a response as to which hours they work, with the options being "regular day shift", "regular evening shift", "regular night shift", "shift rotates", split shift", "irregular schedule or hours", or "other" with approximately **65%** of the participants responding **regular day shift**.  Approximately **2 out of 3** participants work day shifts.
</div>

# Examining numerical variable 
## 1st Numerical `hrs_work_week`

**Numerical Summary Table** 

```{r summarize num 1}
hours_worked <- mydata %>% 
  filter(H4LM19 < 121) %>% 
  summarize(n = n(),
            min = min(H4LM19 ),
            q1 = quantile(H4LM19 , probs=0.25),
            median = median(H4LM19 ),
            mean = mean(H4LM19 ),
            q3 = quantile(H4LM19 , probs=0.75),
            max = max(H4LM19 ),
            sd = sd(H4LM19 ))

kable(round(hours_worked,1)) %>% 
kable_styling(full_width = F, position="center")
```


**Histogram - visualization of the distribution**

```{r hist num 1}
mydata %>%
  filter(H4LM19  < 121) %>% 
  ggplot(aes(x=H4LM19 )) + 
    geom_histogram(aes(y=..density..), color="white", fill="steelblue", binwidth = 5) + 
      xlab("hours per week") +
      ggtitle("How many hours a week (do/did) you 
              usually work at this job?") 
```

**Boxplot - visualization of 5 number summary**

```{r boxplot num 1}
mydata %>%
  filter(H4LM19  < 121) %>% 
  ggplot(aes(y=H4LM19 , x=0)) + 
    geom_boxplot(color="steelblue", width=0.6) + 
      ggtitle("How many hours a week (do/did) you usually work at this job?")+
  coord_flip()
```

**Narrative Summary**
<div id = "narrative">

Participants were asked, in reference to their curren or most recent job (which they work more than 10 hours/week), "*How many hours a week (do/did) you usually work at this job?*"  

* **5023** out of **5114** responded with hours between 10 and 120.  
  
* **82** participants were a **legitimate skip** since they have not worked a paying job for at least 10 hours a week, they are not represented here.  

The center of the distribution is best described with the **mode** and **median** of 40 hours/week.   There is considerable overall variation as hours vary from 10 to 120, although the middle 50% of particpants are between 40 and 45 hours, for an interquartile range (**IQR**) of 5 hours.  Weekly work hours is *slightly skewed to the **right*** (since outliers extend, to the right, to 120 hours).  This skew also results in the **mean** being greater than the **median**, which is a typically characteristic of right skewed distributions. 
</div>





